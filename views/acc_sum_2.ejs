<!DOCTYPE html>
<html lang="en"
      dir="ltr">

    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible"
              content="IE=edge">
              <meta name="viewport"
              content="width=device-width, initial-scale=1, shrink-to-fit=no">
              <title> Design Bee Studio</title>
              <link rel="icon" href="logo.png" type="image/gif" sizes="16x16">

        <!-- Prevent the demo from appearing in search engines -->
        <meta name="robots"
              content="noindex">

        <link href="https://fonts.googleapis.com/css?family=Lato:400,700%7CRoboto:400,500%7CExo+2:600&display=swap"
              rel="stylesheet">

        <!-- Preloader -->
        <link type="text/css"
              href="./public/vendor/spinkit.css"
              rel="stylesheet">

        <!-- Perfect Scrollbar -->
        <link type="text/css"
              href="./public/vendor/perfect-scrollbar.css"
              rel="stylesheet">

        <!-- Material Design Icons -->
        <link type="text/css"
              href="./public/css/material-icons.css"
              rel="stylesheet">

        <!-- Font Awesome Icons -->
        <link type="text/css"
              href="./public/css/fontawesome.css"
              rel="stylesheet">

        <!-- Preloader -->
        <link type="text/css"
              href="./public/css/preloader.css"
              rel="stylesheet">

        <!-- App CSS -->
        <link type="text/css"
              href="./public/css/app.css"
              rel="stylesheet">

        <script src="https://cdnjs.cloudflare.com/ajax/libs/pikaday/1.4.0/pikaday.min.js" type="text/javascript"></script>
        <link href="https://cdnjs.cloudflare.com/ajax/libs/pikaday/1.4.0/css/pikaday.min.css" rel="stylesheet" type="text/css" />

        <!-- jQuery -->
        <script src="./public/vendor/jquery.min.js"></script>

        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

        <!--For Text Editor-->
        <script src="./public/ckeditor/ckeditor.js"></script>

        <style>
            .topnav {
  overflow: hidden;
  background-color: #333;
}

.topnav a {
  float: left;
  color: #f2f2f2;
  text-align: center;
  padding: 14px 16px;
  text-decoration: none;
  font-size: 17px;
}

.topnav a:hover {
  background-color: #ddd;
  color: black;
}

.topnav a.active {
  background-color: #0d56cc;
  color: white;
}
        </style>

    </head>

    <body class="layout-sticky-subnav layout-default ">

        <div class="preloader">
            <div class="sk-chase">
                <div class="sk-chase-dot"></div>
                <div class="sk-chase-dot"></div>
                <div class="sk-chase-dot"></div>
                <div class="sk-chase-dot"></div>
                <div class="sk-chase-dot"></div>
                <div class="sk-chase-dot"></div>
            </div>

            <!-- <div class="sk-bounce">
    <div class="sk-bounce-dot"></div>
    <div class="sk-bounce-dot"></div>
  </div> -->

            <!-- More spinner examples at https://github.com/tobiasahlin/SpinKit/blob/master/examples -->
        </div>

        <!-- Header Layout -->
        <div class="mdk-header-layout js-mdk-header-layout">

            <!-- Header -->

            <div id="header"
                 class="mdk-header js-mdk-header mb-0"
                 data-fixed
                 data-effects="">
                <div class="mdk-header__content">

                    <!-- Navbar -->

                    <div class="navbar navbar-expand pr-0 navbar-dark-pickled-bluewood navbar-shadow"
                         id="default-navbar"
                         data-primary>

                        <!-- Navbar Toggler -->

                        <button class="navbar-toggler w-auto mr-16pt d-block rounded-0"
                                type="button"
                                data-toggle="sidebar">
                            <span class="material-icons">short_text</span>
                        </button>

                        <!-- // END Navbar Toggler -->

                        <!-- Navbar Brand -->

                        <a href="/home"
                           class="navbar-brand mr-16pt">

                        <span class="avatar avatar-sm navbar-brand-icon mr-0 mr-lg-8pt">
                            <span class="avatar-title rounded"><img src="logo.jpg"
                                alt="logo"
                                class="img-fluid" /></span>
                        </span>
                        <span class="d-none d-lg-block">Welcome Admin</span>
                        </a>

                        <!-- // END Navbar Brand -->

                        

                        <!-- // END Navbar Search -->

                        <div class="flex"></div>

                        <!-- Navbar Menu -->

                        <div class="nav navbar-nav flex-nowrap d-flex mr-16pt">

                            <div class="nav-item dropdown">
                                <a href="#"
                                   class="nav-link d-flex align-items-center dropdown-toggle"
                                   data-toggle="dropdown"
                                   data-caret="false">

                                    <span class="avatar avatar-sm mr-8pt2">

                                        <span class="avatar-title rounded-circle bg-primary"><i class="material-icons">account_box</i></span>

                                    </span>

                                </a>
                                <div class="dropdown-menu dropdown-menu-right">
                                    <div class="dropdown-header"><strong>Account</strong></div>
                                    <a class="dropdown-item"
                                       href="/edit-account">Edit Account</a>
                                    <a class="dropdown-item"
                                       href="/logout">Logout</a>
                                </div>
                            </div>
                        </div>

                        <!-- // END Navbar Menu -->

                    </div>

                    <!-- // END Navbar -->

                </div>
            </div>

            <!-- // END Header -->

            <!-- Header Layout Content -->
            <div class="mdk-header-layout__content page-content ">

                <div class="pt-32pt">
                    <div class="container page__container d-flex flex-column flex-md-row align-items-center text-center text-sm-left">
                        <div class="flex d-flex flex-column flex-sm-row align-items-center">
                            
                            <div class="mb-24pt mb-sm-0 mr-sm-24pt">
                                <h4 class="page-title">Total Account Summery</h4>
                                <ol class="breadcrumb">
                                    <li class="breadcrumb-item"><a href="/home"></a>Home</a></li>
                                    <li class="breadcrumb-item"><a href="javaScript:void()">Total Account Summery</a></li>
                                </ol>
                            </div>
                            <div class="col-sm-8">
                                <div class="btn-group float-sm-right">
                                    <button type="button" onclick="exportTableToExcel('cashbook_table','Cashbook-Details')" class="btn btn-outline-success btn-sm waves-effect waves-light m-1 pull-right" style="height: 50px; width: 110px; font-size: larger;"> <i class="fa fa-file-excel-o" style="font-size:25px"></i> &nbsp; Excel </button>
                                </div>
                            </div>
                            <script>
                                function exportTableToExcel(tableID, filename = ''){
                                    var downloadLink;
                                    var dataType = 'application/vnd.ms-excel';
                                    var tableSelect = document.getElementById(tableID);
                                    var tableHTML = tableSelect.outerHTML.replace(/ /g, '%20');
                                    
                                    // Specify file name
                                    filename = filename?filename+'.xls':'excel_data.xls';
                                    
                                    // Create download link element
                                    downloadLink = document.createElement("a");
                                    
                                    document.body.appendChild(downloadLink);
                                    
                                    if(navigator.msSaveOrOpenBlob){
                                        var blob = new Blob(['\ufeff', tableHTML], {
                                            type: dataType
                                        });
                                        navigator.msSaveOrOpenBlob( blob, filename);
                                    }else{
                                        // Create a link to the file
                                        downloadLink.href = 'data:' + dataType + ', ' + tableHTML;
                                    
                                        // Setting the file name
                                        downloadLink.download = filename;
                                        
                                        //triggering the function
                                        downloadLink.click();
                                    }
                                }
                            </script>
                        </div>
                    </div>
                </div>

                <div class="topnav">
                    <a  href="/acc_sum">Show All Transactions</a>
                    <a class="active" href="/acc_sum_2">Project Transactions</a>
                    <a href="/acc_sum_3">Non-Project Transactions</a>
                    
                  </div>
                
                <div class="page-section container page__container">
                    <div class="row">
                        <div class="col-lg-6">
                            <button class="card border-1 border-left-3 border-left-accent text-center mb-lg-0" data-toggle="modal" data-target="#dailyexpenses">
                                <div class="card-body">
                                    <h4 class="mb-0"><i class="fa fa-plus"></i> Add More</h4>   
                                </div>
                            </button>
                        </div>


                        <!--<div class="col-sm-6">
                            <ul class="nav nav-tabs">
                                <li class="active"><a data-toggle="tab" href="#home">Home</a></li>
                                <li><a data-toggle="tab" href="#menu1">Menu 1</a></li>
                                <li><a data-toggle="tab" href="#menu2">Menu 2</a></li>
                                <li><a data-toggle="tab" href="#menu3">Menu 3</a></li>
                            </ul>
                          
                        </div>-->
                    </div>

                    <br>
                    <br>
                    <form id="dateForm">

                        <div class="row">
                            <div class="col-sm-4">
                                <label for="input-21" class="col-form-label">Select Date</label>
                            </div>
                            
                            <div class="col-sm-4">
                                <label for="input-21" class="col-form-label">Select Month and Year</label>
                                    
                            </div>
                                
                            <div class="col-sm-4">
                                <label for="input-21" class="col-form-label">Select Project</label>
                            </div>
                            
                        </div>








                        <div class="row">
                            <div class="col-sm-4">
                                <input type="date" id="date-picker" name="date" class="form-control">
                            </div>
                            
                            <div class="col-sm-4">
                                <div class="row">
                                    <div class="col-sm-6">
                                        
                                            <div class="input-group">
                                                <!--<label for="input-21" class="col-form-label">Select a month</label>-->
                                                <select id="month" name="month" class="form-control single-select">
                                                    <option value="">Select Month</option>
                                                    <option value="01">January</option>
                                                    <option value="02">February</option>
                                                    <option value="03">March</option>
                                                    <option value="04">April</option>
                                                    <option value="05">May</option>
                                                    <option value="06">June</option>
                                                    <option value="07">July</option>
                                                    <option value="08">August</option>
                                                    <option value="09">September</option>
                                                    <option value="10">October</option>
                                                    <option value="11">November</option>
                                                    <option value="12">December</option>
                                                </select>
                                            </div>
                                        
                                    </div>



                                    <div class="col-sm-6">
                                        <div class="form-group">
                                            
                                                <div class="input-group">
                                                    <select class="form-control single-select" id="year" name="year" required>
                                                        <option value="">Select Year</option>

                                                        <!--<option value="Others">Others</option>-->
                                                    </select>
                                                </div>
                                            
                                        </div>
                                    </div>
                                </div>
                            </div>
                                
                            <div class="col-sm-4">
                                <div>
                                    <div class="input-group">
                                        <div class="input-group">
                                            <!--<label for="input-21" class="col-sm-4 col-form-label">Select a project</label>-->
                                            <select id="search_project" name="search_project" class="form-control single-select">
                                                <option value="">Select Project</option>
                                            </select>

                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            
                            
                        </div>
                    </form>
                    <br>
                    <div class="row">
                        <div class="col-sm-4">
                            <div class="input-group-append">
                                <button class="btn btn-primary pull-left" style="width: 100%;" onclick="submit()"><i class="fa fa-search"></i>&nbsp;&nbsp;Search</button>
                            </div>
                        </div>
                        <div class="col-sm-4">
                            <div class="input-group-append">
                                <button class="btn btn-primary" onclick="submit2()" style="width: 100%;"><i class="fa fa-search"></i>&nbsp;&nbsp;Search</button>
                            </div>
                        </div>
                        <div class="col-sm-4">
                            <div class="input-group-append ">
                                <button class="btn btn-primary" onclick="submit3()" style="width: 100%;"><i class="fa fa-search"></i>&nbsp;&nbsp;Search</button>
                            </div>
                        </div>
                    </div>
                    <br><br><br>
                    <div class="card table-responsive">
                        <table id="cashbook_table" class="table table-flush table-nowrap table-light table-striped shadow-light">
                            <thead>
                                <tr>
                                    <!--<th scope="col">Bill Id</th>-->
                                    <th scope="col">Sl. No.</th>
                                    <th scope="col">Project</th>
                                    <th scope="col">Purpose</th>
                                    <th scope="col">Benificiary Name</th>
                                    <th scope="col">Credit</th>
                                    <th scope="col">Debit</th>
                                    <th scope="col">Transaction Type</th>
                                    <th scope="col">Transaction ID</th>
                                    
                                    <th scope="col">Transaction Method</th>
                                    <th scope="col">Cheque Number</th>
                                    <th scope="col">Transaction Date</th>
                                    <th scope="col">Transaction Time</th>
                                    
                                    
                                </tr>
                                    
                            </thead>
                            <tbody id="cashbook">
                                
                            </tbody>
                        </table>
                        <script>
                            var date;
                            
                    
                            function submit() { 
                    
                                var formEl = document.forms.dateForm;
                                var formData = new FormData(formEl);
                                date = formData.get('date');
                                
                                
                                //document.getElementById("date_time").innerHTML = "Date - " + date + "<br><br>";
                    
                    
                                const url = "/cashbook/getdata4/?date=" + date;
                    
                                if(!date){
                                    alert("Please fill the input!") 
                                } else {
                                fetch(url)
                                    .then(function (response) {
                                        return response.json();
                                    })
                                    .then(function (data) {
                                        $("#cashbook tr").remove(); 
                                        appendData(data);
                                    })
                                    .catch(function (err) {
                                        console.log('error: ' + err);
                                    });
                                }
                    
                                
                    
                                function appendData(data) {
                                    var mainContainer = document.getElementById("cashbook");

                                    var credit, debit, student_name, student_id, student_roll, student_class, month;
                                    var credit_sum = Number(0);
                                    var debit_sum = Number(0);
                                    var benificiary_name = '';
                                    var transaction_id = '';
                                    var cheque_number = '';
                                    var project = '';
                                    var transaction_type = '';
                                    var transaction_method = '';
                                   
                                   
                                    for (var i = 0; i < data.length; i++) {
                    
                                        

                                         id = data[i].id;

                                        if(data[i].credit !== '0'){
                                            credit = data[i].credit;
                                            credit_sum += Number(credit);
                                            
                                        }else{
                                            credit = '&nbsp';
                                        }
                                    
                                        if(data[i].debit !== '0'){
                                            debit = data[i].debit;
                                            debit_sum += Number(debit);
                                        }else{
                                            debit = '&nbsp';
                                        }
                                        //-------------------
                                        if(data[i].benificiary_name !== null){
                                            benificiary_name = data[i].benificiary_name;
                                            
                                        }else{
                                            benificiary_name = '&nbsp';
                                        }
                                        if(data[i].transaction_id !== null){
                                            transaction_id = data[i].transaction_id;
                                            
                                        }else{
                                            transaction_id = '&nbsp';
                                        }
                                        if(data[i].cheque_number !== null){
                                            cheque_number = data[i].cheque_number;
                                            
                                        }else{
                                            cheque_number = '&nbsp';
                                        }

                                        if(data[i].project_id == 'Others'){
                                            project = 'Others';
                                        }else{
                                            project = data[i].project_name + ' [id: ' + data[i].project_id + ']';
                                        }

                                        //------------------

                                        if(data[i].transaction_type !== null){
                                            transaction_type = data[i].transaction_type;
                                            
                                        }else{
                                            transaction_type = '&nbsp';
                                        }

                                        if(data[i].transaction_method !== null){
                                            transaction_method = data[i].transaction_method;
                                            
                                        }else{
                                            transaction_method = '&nbsp';
                                        }

                                        var div = document.createElement("tr");
                                        div.innerHTML = '<tr>' +
                                                            //'<td>' + id + '</td>' +
                                                            '<td>' + (parseInt(i) + parseInt(1)) + '</td>' +
                                                            '<td>' + project + '</td>' +
                                                            '<td>' + data[i].purpose + '</td>' +
                                                            '<td>' + benificiary_name + '</td>' +
                                
                                                            '<td>' + credit + '</td>' +
                                                            '<td>' + debit + '</td>' +
                                                            '<td>' + transaction_type + '</td>' +
                                                            '<td>' + transaction_id + '</td>' +
                                                           
                                                            '<td>' + transaction_method + '</td>' +
                                                            '<td>' + cheque_number + '</td>' +
                                                            '<td>' + data[i].transaction_date + '</td>' +
                                                            '<td>' + data[i].transaction_time + '</td>' +
                                            
                                                        '</tr>' ;
                                        mainContainer.appendChild(div);
                    
                                    }

                                    var earning = credit_sum - debit_sum;

                                    var div = document.createElement("tr");
                                        div.innerHTML = '<tr>' +
                                                            '<td>' + '</td>' +
                                                            '<td>' + '<b>Total Credit and Debit: </b>' + '</td>' +
                                                            '<td>' +  '</td>' +
                                                            '<td>' +  '</td>' +
                                                            
                                                            '<td><b>' + credit_sum + '</b></td>' +
                                                            '<td><b>' + debit_sum  + '</b></td>' +
                                                            '<td>' + '</td>' +
                                                            '<td>' + '</td>' +
                                                            '<td>' + '</td>' +
                                                            '<td>' + '</td>' +
                                                            '<td>' + '</td>' +
                                                            '<td>' + '</td>' +
                                                            
                                                    
                                                        '</tr>' ;
                                        mainContainer.appendChild(div);
                                        var div = document.createElement("tr");
                                        div.innerHTML = '<tr>' +
                                                            '<td>' + '</td>' +
                                                            '<td>' + '<h4>Total Earning: </h4>' + '</td>' +
                                                            
                                                            
                                                            '<td><b>' + '</b></td>' +
                                                            '<td><b>' + '</b></td>' +
                                                            '<td>' + '</td>' +
                                                            '<td>' +  '</td>' +
                                                            '<td><h4>' + earning + '</h4></td>' +
                                                            '<td>' + '</td>' +
                                                            '<td>' +  '</td>' +
                                                            '<td>' + '</td>' +
                                                            '<td>' + '</td>' +
                                                            '<td>' + '</td>' +
                                                           
                                                         
                                                    
                                                        '</tr>' ;
                                        mainContainer.appendChild(div);
                                }
                            }
                            
                            function submit2() { 
                    
                                var formEl = document.forms.dateForm;
                                var formData = new FormData(formEl);
                                var month = formData.get('month');
                                var search_year = formData.get('year');

                                //document.getElementById("date_time").innerHTML = "Date - " + date + "<br><br>";


                                const url2 = "/cashbook/getdata5/?month=" + month + "&year=" + search_year;

                                if(!month || !search_year){
                                    alert("Please fill all inputs!")
                                } else {
                                    fetch(url2)
                                        .then(function (response) {
                                            return response.json();
                                        })
                                        .then(function (data) {
                                            $("#cashbook tr").remove(); 
                                            appendData4(data);
                                        })
                                        .catch(function (err) {
                                            console.log('error: ' + err);
                                        });
                                    }  
                                
                                
                                
                                    function appendData4(data) {
                                    var mainContainer = document.getElementById("cashbook");

                                    var credit, debit, student_name, student_id, student_roll, student_class, month;
                                    var credit_sum = Number(0);
                                    var debit_sum = Number(0);
                                    var benificiary_name = '';
                                    var transaction_id = '';
                                    var cheque_number = '';
                                    var project = '';
                                   
                                    for (var i = 0; i < data.length; i++) {
                    
                                        

                                         id = data[i].id;

                                        if(data[i].credit !== '0'){
                                            credit = data[i].credit;
                                            credit_sum += Number(credit);
                                            
                                        }else{
                                            credit = '&nbsp';
                                        }
                                    
                                        if(data[i].debit !== '0'){
                                            debit = data[i].debit;
                                            debit_sum += Number(debit);
                                        }else{
                                            debit = '&nbsp';
                                        }
                                        //-------------------
                                        if(data[i].benificiary_name !== null){
                                            benificiary_name = data[i].benificiary_name;
                                            
                                        }else{
                                            benificiary_name = '&nbsp';
                                        }
                                        if(data[i].transaction_id !== null){
                                            transaction_id = data[i].transaction_id;
                                            
                                        }else{
                                            transaction_id = '&nbsp';
                                        }
                                        if(data[i].cheque_number !== null){
                                            cheque_number = data[i].cheque_number;
                                            
                                        }else{
                                            cheque_number = '&nbsp';
                                        }

                                        if(data[i].project_id == 'Others'){
                                            project = 'Others';
                                        }else{
                                            project = data[i].project_name + ' [id: ' + data[i].project_id + ']';
                                        }

                                        var div = document.createElement("tr");
                                        div.innerHTML = '<tr>' +
                                                            //'<td>' + id + '</td>' +
                                                            '<td>' + (parseInt(i) + parseInt(1)) + '</td>' +
                                                            '<td>' + project + '</td>' +
                                                            '<td>' + data[i].purpose + '</td>' +
                                                            '<td>' + benificiary_name + '</td>' +
                                
                                                            '<td>' + credit + '</td>' +
                                                            '<td>' + debit + '</td>' +
                                                            '<td>' + data[i].transaction_type + '</td>' +
                                                            '<td>' + transaction_id + '</td>' +
                                                           
                                                            '<td>' + data[i].transaction_method + '</td>' +
                                                            '<td>' + cheque_number + '</td>' +
                                                            '<td>' + data[i].transaction_date + '</td>' +
                                                            '<td>' + data[i].transaction_time + '</td>' +
                                            
                                                        '</tr>' ;
                                        mainContainer.appendChild(div);
                    
                                    }

                                    var earning = credit_sum - debit_sum;

                                    var div = document.createElement("tr");
                                        div.innerHTML = '<tr>' +
                                                            '<td>' + '</td>' +
                                                            '<td>' + '<b>Total Credit and Debit: </b>' + '</td>' +
                                                            '<td>' +  '</td>' +
                                                            '<td>' +  '</td>' +
                                                            
                                                            '<td><b>' + credit_sum + '</b></td>' +
                                                            '<td><b>' + debit_sum  + '</b></td>' +
                                                            '<td>' + '</td>' +
                                                            '<td>' + '</td>' +
                                                            '<td>' + '</td>' +
                                                            '<td>' + '</td>' +
                                                            '<td>' + '</td>' +
                                                            '<td>' + '</td>' +
                                                            
                                                    
                                                        '</tr>' ;
                                        mainContainer.appendChild(div);
                                        var div = document.createElement("tr");
                                        div.innerHTML = '<tr>' +
                                                            '<td>' + '</td>' +
                                                            '<td>' + '<h4>Total Earning: </h4>' + '</td>' +
                                                            
                                                            
                                                            '<td><b>' + '</b></td>' +
                                                            '<td><b>' + '</b></td>' +
                                                            '<td>' + '</td>' +
                                                            '<td>' +  '</td>' +
                                                            '<td><h4>' + earning + '</h4></td>' +
                                                            '<td>' + '</td>' +
                                                            '<td>' +  '</td>' +
                                                            '<td>' + '</td>' +
                                                            '<td>' + '</td>' +
                                                            '<td>' + '</td>' +
                                                           
                                                         
                                                    
                                                        '</tr>' ;
                                        mainContainer.appendChild(div);
                                }
                            }


                            function submit3() { 
                    
                                var formEl = document.forms.dateForm;
                                var formData = new FormData(formEl);
                                
                                var search_project = formData.get('search_project');

                                //document.getElementById("date_time").innerHTML = "Date - " + date + "<br><br>";


                                const url3 = "/cashbook/getdata3/?project_id=" + search_project;

                                if(!search_project){
                                    alert("Please fill the input!")
                                } else {
                                    fetch(url3)
                                        .then(function (response) {
                                            return response.json();
                                        })
                                        .then(function (data) {
                                            $("#cashbook tr").remove(); 
                                            appendData5(data);
                                        })
                                        .catch(function (err) {
                                            console.log('error: ' + err);
                                        });
                                    }  
                                
                                
                                
                                    function appendData5(data) {
                                    var mainContainer = document.getElementById("cashbook");
                                    
                                    var credit, debit, student_name, student_id, student_roll, student_class, month;
                                    var credit_sum = Number(0);
                                    var debit_sum = Number(0);
                                    var benificiary_name = '';
                                    var transaction_id = '';
                                    var cheque_number = '';
                                    var project = '';
                                    
                                    for (var i = 0; i < data.length; i++) {
                                    

                                    
                                         id = data[i].id;
                                    
                                        if(data[i].credit !== '0'){
                                            credit = data[i].credit;
                                            credit_sum += Number(credit);

                                        }else{
                                            credit = '&nbsp';
                                        }
                                    
                                        if(data[i].debit !== '0'){
                                            debit = data[i].debit;
                                            debit_sum += Number(debit);
                                        }else{
                                            debit = '&nbsp';
                                        }
                                        //-------------------
                                        if(data[i].benificiary_name !== null){
                                            benificiary_name = data[i].benificiary_name;

                                        }else{
                                            benificiary_name = '&nbsp';
                                        }
                                        if(data[i].transaction_id !== null){
                                            transaction_id = data[i].transaction_id;

                                        }else{
                                            transaction_id = '&nbsp';
                                        }
                                        if(data[i].cheque_number !== null){
                                            cheque_number = data[i].cheque_number;

                                        }else{
                                            cheque_number = '&nbsp';
                                        }
                                    
                                        if(data[i].project_id == 'Others'){
                                            project = 'Others';
                                        }else{
                                            project = data[i].project_name + ' [id: ' + data[i].project_id + ']';
                                        }
                                    
                                        var div = document.createElement("tr");
                                        div.innerHTML = '<tr>' +
                                                            //'<td>' + id + '</td>' +
                                                            '<td>' + (parseInt(i) + parseInt(1)) + '</td>' +
                                                            '<td>' + project + '</td>' +
                                                            '<td>' + data[i].purpose + '</td>' +
                                                            '<td>' + benificiary_name + '</td>' +
                                        
                                                            '<td>' + credit + '</td>' +
                                                            '<td>' + debit + '</td>' +
                                                            '<td>' + data[i].transaction_type + '</td>' +
                                                            '<td>' + transaction_id + '</td>' +

                                                            '<td>' + data[i].transaction_method + '</td>' +
                                                            '<td>' + cheque_number + '</td>' +
                                                            '<td>' + data[i].transaction_date + '</td>' +
                                                            '<td>' + data[i].transaction_time + '</td>' +

                                                        '</tr>' ;
                                        mainContainer.appendChild(div);
                                        
                                    }
                                
                                    var earning = credit_sum - debit_sum;
                                
                                    var div = document.createElement("tr");
                                        div.innerHTML = '<tr>' +
                                                            '<td>' + '</td>' +
                                                            '<td>' + '<b>Total Credit and Debit: </b>' + '</td>' +
                                                            '<td>' +  '</td>' +
                                                            '<td>' +  '</td>' +

                                                            '<td><b>' + credit_sum + '</b></td>' +
                                                            '<td><b>' + debit_sum  + '</b></td>' +
                                                            '<td>' + '</td>' +
                                                            '<td>' + '</td>' +
                                                            '<td>' + '</td>' +
                                                            '<td>' + '</td>' +
                                                            '<td>' + '</td>' +
                                                            '<td>' + '</td>' +


                                                        '</tr>' ;
                                        mainContainer.appendChild(div);
                                        var div = document.createElement("tr");
                                        div.innerHTML = '<tr>' +
                                                            '<td>' + '</td>' +
                                                            '<td>' + '<h4>Total Earning: </h4>' + '</td>' +


                                                            '<td><b>' + '</b></td>' +
                                                            '<td><b>' + '</b></td>' +
                                                            '<td>' + '</td>' +
                                                            '<td>' +  '</td>' +
                                                            '<td><h4>' + earning + '</h4></td>' +
                                                            '<td>' + '</td>' +
                                                            '<td>' +  '</td>' +
                                                            '<td>' + '</td>' +
                                                            '<td>' + '</td>' +
                                                            '<td>' + '</td>' +



                                                        '</tr>' ;
                                        mainContainer.appendChild(div);
                                }
                            }
                        
                        
                        </script>
                    </div>
                </div>

            </div>
            <!-- End container-fluid-->
            <div class="overlay"></div>
        </div>
        <!--End content-wrapper-->
                
    


    <!--End Back To Top Button-->
            <!-- // END Header Layout Content -->

            <!-- Footer 

            <div class="bg-white border-top-2 mt-auto">
                <div class="container page__container page-section d-flex flex-column">
                    <p class="text-70 brand mb-24pt">
                        <img class="brand-icon"
                             src="./public/images/logo/black-70@2x.jpeg"
                             width="30"
                             alt="Luma"> Luma
                    </p>
                    <p class="measure-lead-max text-50 small mr-8pt">Luma is a beautifully crafted user interface for modern Education Platforms, including Courses & Tutorials, Video Lessons, Student and Teacher Dashboard, Curriculum Management, Earnings and Reporting, ERP, HR, CMS, Tasks, Projects, eCommerce and more.</p>
                    <p class="mb-8pt d-flex">
                        <a href=""
                           class="text-70 text-underline mr-8pt small">Terms</a>
                        <a href=""
                           class="text-70 text-underline small">Privacy policy</a>
                    </p>
                    <p class="text-50 small mt-n1 mb-0">Copyright 2019 &copy; All rights reserved.</p>
                </div>
            </div>-->

            <!-- // END Footer -->
            <div class="bg-white border-top-2 mt-auto">
                <div class="container page__container page-section d-flex flex-column">
                    <p class="text-70 brand mb-24pt">
                        <img class="brand-icon"
                             src="maze.jpeg"
                             width="150"
                             alt="mazesoftsolution">
                    </p>
                    <p class="measure-lead-max text-50 small mr-8pt">We have reached an age where the entire world is reduced to a global village. In this realm of connected living and sharing, we envision a future that will redefine the very purpose of our existence. Today, the solutions are more refined than the demand itself. What we get is better than what we asked for. Businesses, big or small, look for companies that will refine their business needs, more than offering a ready solution. They look for companies that offer competitive web and mobile apps development, e-commerce, and Open-source CMS development to propel their business expansion.</p>
                    <p class="text-50 small mt-n1 mb-0">Developed by <a href="http://www.mazesoftsolutions.com/">Maze Soft Solution</a></p>
                </div>
            </div>
        </div>
        <!-- // END Header Layout -->
        <!--Modal Start-->
        <div class="modal fade" id="dailyexpenses" style="display: none;" aria-hidden="true">
            <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">Add More <font style="color: red;">(<b>*</b> You need to fill up all the field)</font></h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">×</span>
                        </button>
                    </div>
                    <form action="/cashbook/add" method="post"  id="#">
                    <div class="modal-body">
                        <!--<div class="form-group row">
                            <label for="input-21" class="col-sm-3 col-form-label">Project ID<font style="color: red;">*</font></label>
                            <div class="col-sm-9">
                                <div class="input-group">
                                    <input type="text" name="project_id" class="form-control" placeholder="Project ID" value="demo_project_id" disabled>
                                </div>
                            </div>
                        </div>-->
                        <div class="form-group row">
                            <label for="input-21" class="col-sm-3 col-form-label">Project<font style="color: red;">*</font></label>
                            <div class="col-sm-9">
                                <div class="input-group">
                                    <select class="form-control single-select" id="project" name="project_id" required>
                                        <option value="">Select Project</option>
                                        
                                        <!--<option value="Others">Others</option>-->
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="form-group row">
                            <label for="input-21" class="col-sm-3 col-form-label">Beneficiary Name<font style="color: red;">*</font></label>
                            <div class="col-sm-9">
                                <div class="input-group">
                                    <input type="text" name="benificiary_name" class="form-control" placeholder="Beneficiary Name" required>
                                </div>
                            </div>
                        </div>
                        <div class="form-group row">
                            <label for="input-21" class="col-sm-3 col-form-label">Amount<font style="color: red;">*</font></label>
                            <div class="col-sm-9">
                                <div class="input-group">
                                    <input type="number" name="amount" class="form-control" placeholder="Amount" step="any" required>
                                </div>
                            </div>
                        </div>
                        <div class="form-group row">
                            <label for="input-21" class="col-sm-3 col-form-label">Transaction Mode<font style="color: red;">*</font></label>
                            <div class="col-sm-9">
                                <div class="input-group">
                                    <select class="form-control single-select" name="transaction_type" required>
                                        <option value="">Select Transaction Type</option>
                                        <option value="credit">Credit</option>
                                        <option value="debit">Debit</option>
                                        
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="form-group row">
                            <label for="input-21" class="col-sm-3 col-form-label">Transaction Mode<font style="color: red;">*</font></label>
                            <div class="col-sm-9">
                                <div class="input-group">
                                    <select class="form-control single-select" name="transaction_method" required>
                                        <option value="">Select Transaction Method</option>
                                        <option value="cash">Cash</option>
                                        <option value="cheque">Cheque</option>
                                        <option value="online_transaction">Online Transaction</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="form-group row">
                            <label for="input-21" class="col-sm-3 col-form-label">Cheque Number</label>
                            <div class="col-sm-9">
                                <div class="input-group">
                                    <input type="text" name="cheque_number" class="form-control" placeholder="Cheque Number">
                                </div>
                            </div>
                        </div>
                        <div class="form-group row">
                            <label for="input-21" class="col-sm-3 col-form-label">Transaction ID</label>
                            <div class="col-sm-9">
                                <div class="input-group">
                                    <input type="text" name="transaction_id" class="form-control" placeholder="Transaction ID">
                                </div>
                            </div>
                        </div>
                        <div class="form-group row">
                            <label for="input-21" class="col-sm-3 col-form-label">Purpose</label>
                            <div class="col-sm-9">
                                <div class="input-group">
                                    <textarea rows="6" name="purpose" class="form-control" placeholder="Purpose" required></textarea>
                                </div>
                            </div>
                        </div>
                        
                    </div>
                    <input type="hidden" name="sid" value="370">
                    <div class="modal-footer">
                        <button type="button" class="btn btn-inverse-primary" data-dismiss="modal"><i class="fa fa-times"></i> Close</button>
                        <button type="submit" name="add_daily_expenses" class="btn btn-primary"><i class="fa fa-check-square-o"></i> Add</button>
                    </div>
                    </form>
                </div>
            </div>
        </div>
        <!-- Drawer -->

        <div class="mdk-drawer js-mdk-drawer"
        id="default-drawer">
       <div class="mdk-drawer__content">
           <div class="sidebar sidebar-dark-pickled-bluewood sidebar-left"
                data-perfect-scrollbar>

               <!-- Sidebar Content -->

               <a href="/home"
                  class="sidebar-brand ">
                   <!-- <img class="sidebar-brand-icon" src="./public/images/illustration/student/128/white.svg" alt="Luma"> -->

                   <span class="avatar avatar-xl sidebar-brand-icon h-auto">

                       <span class="avatar-title rounded"><img src="logo.jpg"
                           alt="logo"
                           class="img-fluid" /></span>

                   </span>

                   <span>Welcome Admin</span>
               </a>

               
                   
               <ul class="sidebar-menu">

                   <li class="sidebar-menu-item">
                       <a class="sidebar-menu-button"
                          href="/home">
                           <span class="material-icons sidebar-menu-icon sidebar-menu-icon--left">home</span>
                           <span class="sidebar-menu-text">Dashboard</span>
                       </a>
                   </li>
                   <ul class="sidebar-menu">

                       <li class="sidebar-menu-item">
                           <a class="sidebar-menu-button js-sidebar-collapse"
                              data-toggle="collapse"
                              href="#enterprise_menu">
                               <span class="material-icons sidebar-menu-icon sidebar-menu-icon--left">people_outline</span>
                               Clients
                               <span class="ml-auto sidebar-menu-toggle-icon"></span>
                           </a>
                           <ul class="sidebar-submenu collapse sm-indent"
                               id="enterprise_menu">
                               <li class="sidebar-menu-item">
                                   <a class="sidebar-menu-button"
                                      href="/client">
                                       <span class="sidebar-menu-text">Client</span>
                                   </a>
                               </li>
                               <li class="sidebar-menu-item">
                                   <a class="sidebar-menu-button"
                                      href="/add_client">
                                       <span class="sidebar-menu-text">Add Client</span>
                                   </a>
                               </li>
                           </ul>
                       </li>
                       <li class="sidebar-menu-item">
                           <a class="sidebar-menu-button"
                              data-toggle="collapse"
                              href="#account_menu">
                               <span class="material-icons sidebar-menu-icon sidebar-menu-icon--left">local_library</span>
                               Quatation
                               <span class="ml-auto sidebar-menu-toggle-icon"></span>
                           </a>
                           <ul class="sidebar-submenu collapse sm-indent"
                               id="account_menu">
                               <li class="sidebar-menu-item">
                                   <a class="sidebar-menu-button"
                                      href="/quatation">
                                       <span class="sidebar-menu-text">Quatation</span>
                                   </a>
                               </li>
                               <li class="sidebar-menu-item">
                                   <a class="sidebar-menu-button"
                                      href="/add_quatation">
                                       <span class="sidebar-menu-text">Create Quatation</span>
                                   </a>
                               </li>
                           </ul>
                       </li>
                       <li class="sidebar-menu-item">
                           <a class="sidebar-menu-button"
                              href="/project">
                               <span class="material-icons sidebar-menu-icon sidebar-menu-icon--left">tune</span>
                               <span class="sidebar-menu-text">Project</span>
                           </a>
                       </li>
                   <li class="sidebar-menu-item">
                       <a class="sidebar-menu-button"
                          data-toggle="collapse"
                          href="#ecommerce_menu">
                           <span class="material-icons sidebar-menu-icon sidebar-menu-icon--left">shopping_cart</span>
                           Finance
                           <span class="ml-auto sidebar-menu-toggle-icon"></span>
                       </a>
                       <ul class="sidebar-submenu collapse sm-indent"
                           id="ecommerce_menu">
                           <li class="sidebar-menu-item">
                               <a class="sidebar-menu-button"
                                  href="/finance">
                                   <span class="sidebar-menu-text">Finance</span>
                               </a>
                           </li>
                           <li class="sidebar-menu-item">
                               <a class="sidebar-menu-button"
                                  href="/add_finance">
                                   <span class="sidebar-menu-text">Add Expenses</span>
                               </a>
                           </li>
                       </ul>
                   </li>

                   <li class="sidebar-menu-item">
                       <a class="sidebar-menu-button"
                          href="/acc_sum">
                           <span class="material-icons sidebar-menu-icon sidebar-menu-icon--left">receipt</span>
                           <span class="sidebar-menu-text">Total Account Summery</span>
                       </a>
                   </li>
                   <li class="sidebar-menu-item">
                       <a class="sidebar-menu-button"
                          href="/profit_loss">
                           <span class="material-icons sidebar-menu-icon sidebar-menu-icon--left">trending_up</span>
                           <span class="sidebar-menu-text">Profit/Loss</span>
                       </a>
                   </li>
                   <li class="sidebar-menu-item">
                       <a class="sidebar-menu-button"
                          data-toggle="collapse"
                          href="#messaging_menu">
                           <span class="material-icons sidebar-menu-icon sidebar-menu-icon--left">people_outline</span>
                           Employee
                           <span class="ml-auto sidebar-menu-toggle-icon"></span>
                       </a>
                       <ul class="sidebar-submenu collapse sm-indent"
                           id="messaging_menu">
                           <li class="sidebar-menu-item">
                               <a class="sidebar-menu-button"
                                  href="/employee">
                                   <span class="sidebar-menu-text">Employee</span>
                               </a>
                           </li>
                           <li class="sidebar-menu-item">
                               <a class="sidebar-menu-button"
                                  href="/add_employee">
                                   <span class="sidebar-menu-text">Add Employee</span>
                               </a>
                           </li>
                       </ul>
                   </li>
                   <li class="sidebar-menu-item">
                       <a class="sidebar-menu-button"
                          data-toggle="collapse"
                          href="#components_menu">
                           <span class="material-icons sidebar-menu-icon sidebar-menu-icon--left">account_box</span>
                           Users
                           <span class="ml-auto sidebar-menu-toggle-icon"></span>
                       </a>
                       <ul class="sidebar-submenu collapse sm-indent"
                           id="components_menu">
                           <li class="sidebar-menu-item">
                               <a class="sidebar-menu-button"
                                  href="/user">
                                   <span class="sidebar-menu-text">Users</span>
                               </a>
                           </li>
                           <li class="sidebar-menu-item">
                               <a class="sidebar-menu-button"
                                  href="/add_user">
                                   <span class="sidebar-menu-text">Add Users</span>
                               </a>
                           </li>
                       </ul>
                   </li>
                   <li class="sidebar-menu-item">
                       <a class="sidebar-menu-button"
                          href="/system_history">
                           <span class="material-icons sidebar-menu-icon sidebar-menu-icon--left">access_time</span>
                           <span class="sidebar-menu-text">System History</span>
                       </a>
                   </li>
                   <li class="sidebar-menu-item">
                       <a class="sidebar-menu-button"
                          href="/bin">
                           <span class="material-icons sidebar-menu-icon sidebar-menu-icon--left">help</span>
                           <span class="sidebar-menu-text">Recyle Bin</span>
                       </a>
                   </li>
               </ul>
               

               <!-- // END Sidebar Content -->

           </div>
       </div>
   </div>

        <!-- // END Drawer -->

        

        <!-- Bootstrap -->
        <script src="./public/vendor/popper.min.js"></script>
        <script src="./public/vendor/bootstrap.min.js"></script>

        <!-- Perfect Scrollbar -->
        <script src="./public/vendor/perfect-scrollbar.min.js"></script>

        <!-- DOM Factory -->
        <script src="./public/vendor/dom-factory.js"></script>

        <!-- MDK -->
        <script src="./public/vendor/material-design-kit.js"></script>

        <!-- App JS -->
        <script src="./public/js/app.js"></script>

        <!-- Preloader -->
        <script src="./public/js/preloader.js"></script>


        <!------------------------------------------------------------>

        <script>
            const url1 = "cashbook/project/getdata";

            fetch(url1)
                .then(function (response) {
                    return response.json();
                })
                .then(function (data) {
                
                    appendData2(data);
                    appendData3(data);
                })
                .catch(function (err) {
                    console.log('error: ' + err);
                });

                function appendData2(data) {
                    var id;
                    var daySelect;
                    var myOption;
                            
                
                            for (var i = 0; i < data.length; i++) {
                            
                            
                            
                                id = data[i].id;
            
                                daySelect = document.getElementById("project");
                                myOption = document.createElement("option");
                                myOption.text = data[i].project_name + ' [id: ' + data[i].project_id + ']';
                                myOption.value = data[i].project_id;
                                daySelect.add(myOption);
                                                    
                            }
                            //myOption.text = "Others";
                            //myOption.value = 'Others';
                }
                function appendData3(data) {

                    const url1 = "/project/getdata";

                    fetch(url1)
                        .then(function (response) {
                            return response.json();
                        })
                        .then(function (data) {
                            var id;
                            var daySelect;
                            var myOption;
                            
                
                            for (var i = 0; i < data.length; i++) {
                            
                            
                            
                                id = data[i].id;
            
                                daySelect = document.getElementById("search_project");
                                myOption = document.createElement("option");
                                myOption.text = data[i].project_name + ' [id: ' + data[i].project_id + ']';
                                myOption.value = data[i].project_id;
                                daySelect.add(myOption);
                                                    
                            }
                            //myOption.text = "Others";
                            //myOption.value = 'Others';
                           
                        })
                        .catch(function (err) {
                            console.log('error: ' + err);
                        });
                            
                }

        </script>
        <script>
            //------------------date----------------------//
    
            // Date object initialized as per Indian (kolkata) timezone. Returns a datetime string
            let nz_date_string = new Date().toLocaleString("en-US", { timeZone: "Asia/Calcutta" });

            // Date object initialized from the above datetime string
            let date_nz = new Date(nz_date_string);

            // year as (YYYY) format
            let year = date_nz.getFullYear();

            for (var i = parseInt(year); i >= 2015; i--) {
                
                var daySelect = document.getElementById("year");
                var myOption = document.createElement("option");
                myOption.text = i;
                myOption.value = i;
                daySelect.add(myOption);
                                    
            }

    

        </script>

    </body>

</html>
